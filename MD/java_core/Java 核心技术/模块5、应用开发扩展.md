### 第36讲 | 谈谈MySQL支持的事务隔离级别，以及悲观锁和乐观锁的原理和应用场景？

隔离级别（Isolation Level），在数据库事务中，为保证并发数据读写的正确性而提出的

以最常见的 MySQL InnoDB 引擎为例，它是基于 MVCC（Multi-Versioning Concurrency Control）和锁的复合实现，按照隔离程度从低到高，MySQL 事务隔离级别分为四个不同层次：

- 读未提交（Read uncommitted），一个事务能够看到其他事务尚未提交的修改，脏读出现

- 读已提交（Read committed），A 事务能够看到 B 事务已经提交的修改，允许其他事务并发修改数据，允许不可重复读和幻象读

- 可重复读（Repeatable reads），保证同一个事务中多次读取的数据是一致的，InnoDB 默认隔离级别，可以简单认为 MySQL 在可重复读级别不会出现幻象读

- 串行化（Serializable），并发事务之间是串行化的，意味着读取需要获取共享读锁，更新需要获取排他写锁，如果 SQL 使用 WHERE 语句，还会获取区间锁（MySQL 以 GAP 锁形式实现，可重复读级别中默认也会使用）

至于悲观锁和**乐观锁**，也并不是 MySQL 或者数据库中独有的概念，而是并发编程的基本概念。主要区别在于，操作共享数据时，“悲观锁”即认为数据出现冲突的可能性更大，而“乐观锁”则是认为大部分情况不会出现冲突，进而决定是否采取排他性措施。

