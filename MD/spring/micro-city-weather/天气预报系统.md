
#### 天气预报系统 `micro-weather-basic`
获得城市天气
```
@RestController
@RequestMapping("/weather")
public class WeatherController {
	@Autowired
	private WeatherDataService weatherDataService;

	@GetMapping("/cityId/{cityId}")
	public WeatherResponse getWeatherByCityId(@PathVariable("cityId") String cityId) {
		return weatherDataService.getDataByCityId(cityId);
	}

	@GetMapping("/cityName/{cityName}")
	public WeatherResponse getWeatherByCityName(@PathVariable("cityName") String cityName) {
		return weatherDataService.getDataByCityName(cityName);
	}
}
```

#### config
server
```
@EnableDiscoveryClient
@EnableConfigServer

spring.application.name= micro-weather-config-server
server.port= 8888
eureka.client.serviceUrl.defaultZone: http://localhost:8761/eureka/
spring.cloud.config.server.git.uri=
spring.cloud.config.server.git.searchPaths=config-repo
```

client
```
spring.application.name: micro-weather-config-client
eureka.client.serviceUrl.defaultZone: http://localhost:8761/eureka/

spring.cloud.config.profile=dev
spring.cloud.config.uri=http://localhost:8888/
```

### eureka
eureka-server
```
server.port: 8761
eureka.instance.hostname: localhost
eureka.client.registerWithEureka: false
eureka.client.fetchRegistry: false
eureka.client.serviceUrl.defaultZone: http://${eureka.instance.hostname}:${server.port}/eureka/

eureka.server.enable-self-preservation=false

@EnableEurekaServer
```
eureka-client
```
spring.application.name: micro-weather-eureka-client

eureka.client.serviceUrl.defaultZone: http://localhost:8761/eureka/
```
eureka-client-feign
```
spring.application.name: micro-weather-eureka-client-feign

eureka.client.serviceUrl.defaultZone: http://localhost:8761/eureka/

feign.client.config.feignName.connectTimeout: 5000
feign.client.config.feignName.readTimeout: 5000

@EnableFeignClients

// CityController
@RestController
public class CityController {
	@Autowired
	private CityClient cityClient;

	@GetMapping("/cities")
	public String listCity() {
		// 通过Feign客户端来查找
		String body = cityClient.listCity();
		return body;
	}
}

@FeignClient("msa-weather-city-eureka")
public interface CityClient {

	@GetMapping("/cities")
	String listCity();
}
```
eureka-client-feign-hystrix
```
spring.application.name: micro-weather-eureka-client-feign-hystrix

eureka.client.serviceUrl.defaultZone: http://localhost:8761/eureka/

feign.client.config.feignName.connectTimeout: 5000
feign.client.config.feignName.readTimeout: 5000

// CityController
@RestController
public class CityController {
	@Autowired
	private CityClient cityClient;

	@GetMapping("/cities")
	@HystrixCommand(fallbackMethod="defaultCities")
	public String listCity() {
		// 通过Feign客户端来查找
		return  cityClient.listCity();;
	}

	public String defaultCities() {
		return "City Data Server is down!";
	}
}
```
eureka-client-zuul
```
spring.application.name: micro-weather-eureka-client-zuul

eureka.client.serviceUrl.defaultZone: http://localhost:8761/eureka/

zuul.routes.hi.path: /hi/**
zuul.routes.hi.serviceId: micro-weather-eureka-client
```

#### quartz
